version: '2.4'
services:
 app:
  image: flaskex:v1 
  command: python3 app.py
  depends_on: 
   - database
  ports: 
   - "3000:5000"
  environment:
   DATABASE_URL: 172.18.1.5  

  networks:
   db-network:
    ipv4_address: 172.18.1.3 
 database:
  image: sqlite:v1
  volumes:
   - "./local-db:/db"
  networks:
   db-network:
    ipv4_address: 172.18.1.5
  restart: always
networks:
 db-network:
  driver: bridge
  ipam:
   driver: default
   config:
    - subnet: 172.18.1.0/24
    - gateway: 172.18.1.1
     
